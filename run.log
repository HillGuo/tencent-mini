2017-07-11 21:15:04,256 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'sql_mode'
2017-07-11 21:15:04,256 - log.py[line:109] - INFO: SHOW VARIABLES LIKE 'sql_mode'
2017-07-11 21:15:04,256 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,256 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,259 INFO sqlalchemy.engine.base.Engine SELECT DATABASE()
2017-07-11 21:15:04,259 - log.py[line:109] - INFO: SELECT DATABASE()
2017-07-11 21:15:04,259 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,259 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,260 INFO sqlalchemy.engine.base.Engine show collation where `Charset` = 'utf8' and `Collation` = 'utf8_bin'
2017-07-11 21:15:04,260 - log.py[line:109] - INFO: show collation where `Charset` = 'utf8' and `Collation` = 'utf8_bin'
2017-07-11 21:15:04,261 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,261 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,262 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS CHAR(60)) AS anon_1
2017-07-11 21:15:04,262 - log.py[line:109] - INFO: SELECT CAST('test plain returns' AS CHAR(60)) AS anon_1
2017-07-11 21:15:04,262 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,262 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,263 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS CHAR(60)) AS anon_1
2017-07-11 21:15:04,263 - log.py[line:109] - INFO: SELECT CAST('test unicode returns' AS CHAR(60)) AS anon_1
2017-07-11 21:15:04,263 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,263 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,264 INFO sqlalchemy.engine.base.Engine SELECT CAST('test collated returns' AS CHAR CHARACTER SET utf8) COLLATE utf8_bin AS anon_1
2017-07-11 21:15:04,264 - log.py[line:109] - INFO: SELECT CAST('test collated returns' AS CHAR CHARACTER SET utf8) COLLATE utf8_bin AS anon_1
2017-07-11 21:15:04,264 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,264 - log.py[line:109] - INFO: {}
2017-07-11 21:15:04,265 INFO sqlalchemy.engine.base.Engine DESCRIBE `user`
2017-07-11 21:15:04,265 - log.py[line:109] - INFO: DESCRIBE `user`
2017-07-11 21:15:04,265 INFO sqlalchemy.engine.base.Engine {}
2017-07-11 21:15:04,265 - log.py[line:109] - INFO: {}
2017-07-11 21:15:43,061 - web.py[line:2063] - WARNING: 404 GET /song/near?longitude=1&latitude=1 (14.17.22.37) 30.52ms
2017-07-11 21:15:43,804 - web.py[line:2063] - WARNING: 404 GET /favicon.ico (14.17.22.37) 2.96ms
2017-07-11 21:18:11,848 - web.py[line:2063] - WARNING: 404 GET / (14.17.22.33) 0.72ms
2017-07-11 21:18:12,183 - web.py[line:2063] - WARNING: 404 GET /favicon.ico (14.17.22.33) 0.92ms
2017-07-11 21:38:04,140 - web.py[line:2063] - INFO: 200 POST /login (59.37.125.37) 0.98ms
2017-07-11 21:38:18,902 - web.py[line:2063] - INFO: 200 POST /login (59.37.125.37) 0.73ms
2017-07-11 21:41:04,220 - web.py[line:2063] - WARNING: 405 GET /login (14.17.22.33) 0.63ms
server is running, listen port:(0),runningEnv:debug
2017-07-11 21:44:52,400 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
2017-07-11 21:44:52,400 - log.py[line:109] - INFO: BEGIN (implicit)
2017-07-11 21:44:52,401 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:44:52,401 - log.py[line:109] - INFO: SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:44:52,401 INFO sqlalchemy.engine.base.Engine {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:44:52,401 - log.py[line:109] - INFO: {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:44:52,403 - web.py[line:2063] - INFO: 200 POST /login (14.17.22.33) 6.75ms
2017-07-11 21:45:01,320 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:01,320 - log.py[line:109] - INFO: SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:01,320 INFO sqlalchemy.engine.base.Engine {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:45:01,320 - log.py[line:109] - INFO: {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:45:01,322 - web.py[line:2063] - INFO: 200 POST /login (14.17.22.33) 4.49ms
2017-07-11 21:45:05,282 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:05,282 - log.py[line:109] - INFO: SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:05,282 INFO sqlalchemy.engine.base.Engine {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:45:05,282 - log.py[line:109] - INFO: {'user_id_1': '120', 'param_1': 1}
2017-07-11 21:45:05,284 - web.py[line:2063] - INFO: 200 POST /login (14.17.22.33) 3.45ms
2017-07-11 21:45:25,971 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:25,971 - log.py[line:109] - INFO: SELECT user.id AS user_id_1, user.user_id AS user_user_id, user.user_name AS user_user_name, user.user_avatar AS user_user_avatar 
FROM user 
WHERE user.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
2017-07-11 21:45:25,971 INFO sqlalchemy.engine.base.Engine {'user_id_1': 'aa', 'param_1': 1}
2017-07-11 21:45:25,971 - log.py[line:109] - INFO: {'user_id_1': 'aa', 'param_1': 1}
2017-07-11 21:45:25,997 INFO sqlalchemy.engine.base.Engine INSERT INTO user (user_id, user_name, user_avatar) VALUES (%(user_id)s, %(user_name)s, %(user_avatar)s)
/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/cursors.py:166: Warning: (1292, "Truncated incorrect DOUBLE value: 'aa'")
  result = self._query(query)
2017-07-11 21:45:25,997 - log.py[line:109] - INFO: INSERT INTO user (user_id, user_name, user_avatar) VALUES (%(user_id)s, %(user_name)s, %(user_avatar)s)
2017-07-11 21:45:25,997 INFO sqlalchemy.engine.base.Engine {'user_name': 'ghhggfh', 'user_id': 'aa', 'user_avatar': 'http://ddddd.jpg'}
2017-07-11 21:45:25,997 - log.py[line:109] - INFO: {'user_name': 'ghhggfh', 'user_id': 'aa', 'user_avatar': 'http://ddddd.jpg'}
2017-07-11 21:45:26,065 INFO sqlalchemy.engine.base.Engine ROLLBACK
2017-07-11 21:45:26,065 - log.py[line:109] - INFO: ROLLBACK
2017-07-11 21:45:26,066 - web.py[line:1590] - ERROR: Uncaught exception POST /login (14.17.22.33)
HTTPServerRequest(protocol='http', host='123.206.212.82:8000', method='POST', uri='/login', version='HTTP/1.1', remote_ip='14.17.22.33', headers={'Connection': 'keep-alive', 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryVFoSigVlYufBBUVo', 'Cache-Control': 'no-cache, max-age=259200', 'Cookie': '_token="2|1:0|10:1499580914|6:_token|44:YzQ3Y2NkYTg5YjJkZDc4ZjI0ZDVhZGE4OTljNTI4MGM=|979e632019fa3ae0f734e45182ac1ffd7c292b7a315d0693b4799a394a1f092f"', 'Content-Length': '357', 'Postman-Token': 'b1833aff-2567-9c70-25e1-6718e8583b80', 'Accept-Encoding': 'gzip, deflate', 'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6', 'Accept': '*/*', 'Host': '123.206.212.82:8000', 'Origin': 'chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'})
Traceback (most recent call last):
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 1182, in _execute_context
    context)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/default.py", line 470, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/cursors.py", line 166, in execute
    result = self._query(query)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 856, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1057, in _read_query_result
    result.read()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1340, in read
    first_packet = self.connection._read_packet()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1014, in _read_packet
    packet.check_error()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 393, in check_error
    err.raise_mysql_exception(self._data)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/err.py", line 107, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.InternalError: (1366, "Incorrect integer value: 'aa' for column 'user_id' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/py3/lib/python3.5/site-packages/tornado/web.py", line 1509, in _execute
    result = method(*self.path_args, **self.path_kwargs)
  File "/home/ubuntu/github/mini/handler/login_handler.py", line 32, in post
    self.db.commit()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/scoping.py", line 157, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 906, in commit
    self.transaction.commit()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 461, in commit
    self._prepare_impl()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 441, in _prepare_impl
    self.session.flush()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 2171, in flush
    self._flush(objects)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 2291, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 2255, in _flush
    flush_context.execute()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/unitofwork.py", line 389, in execute
    rec.execute(self)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/unitofwork.py", line 548, in execute
    uow
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/persistence.py", line 835, in _emit_insert_statements
    execute(statement, params)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 945, in execute
    return meth(self, multiparams, params)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/sql/elements.py", line 263, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 1053, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 1189, in _execute_context
    context)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 1402, in _handle_dbapi_exception
    exc_info
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/base.py", line 1182, in _execute_context
    context)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/engine/default.py", line 470, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/cursors.py", line 166, in execute
    result = self._query(query)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 856, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1057, in _read_query_result
    result.read()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1340, in read
    first_packet = self.connection._read_packet()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 1014, in _read_packet
    packet.check_error()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/connections.py", line 393, in check_error
    err.raise_mysql_exception(self._data)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/pymysql/err.py", line 107, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.InternalError: (pymysql.err.InternalError) (1366, "Incorrect integer value: 'aa' for column 'user_id' at row 1") [SQL: 'INSERT INTO user (user_id, user_name, user_avatar) VALUES (%(user_id)s, %(user_name)s, %(user_avatar)s)'] [parameters: {'user_name': 'ghhggfh', 'user_id': 'aa', 'user_avatar': 'http://ddddd.jpg'}]
2017-07-11 21:45:26,156 - web.py[line:2063] - ERROR: 500 POST /login (14.17.22.33) 186.61ms
2017-07-11 21:46:08,986 - web.py[line:1590] - ERROR: Uncaught exception POST /login (14.17.22.33)
HTTPServerRequest(protocol='http', host='123.206.212.82:8000', method='POST', uri='/login', version='HTTP/1.1', remote_ip='14.17.22.33', headers={'Connection': 'keep-alive', 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryAczVBlCnuewtZ2J0', 'Cache-Control': 'no-cache, max-age=259200', 'Cookie': '_token="2|1:0|10:1499580914|6:_token|44:YzQ3Y2NkYTg5YjJkZDc4ZjI0ZDVhZGE4OTljNTI4MGM=|979e632019fa3ae0f734e45182ac1ffd7c292b7a315d0693b4799a394a1f092f"', 'Content-Length': '363', 'Postman-Token': 'a9a4d311-ae88-8536-326c-e8aea9b30661', 'Accept-Encoding': 'gzip, deflate', 'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6', 'Accept': '*/*', 'Host': '123.206.212.82:8000', 'Origin': 'chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'})
Traceback (most recent call last):
  File "/home/ubuntu/py3/lib/python3.5/site-packages/tornado/web.py", line 1509, in _execute
    result = method(*self.path_args, **self.path_kwargs)
  File "/home/ubuntu/github/mini/handler/login_handler.py", line 28, in post
    user=self.db.query(User).filter(User.user_id==user_id).first()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2755, in first
    ret = list(self[0:1])
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2547, in __getitem__
    return list(res)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2885, in _get_bind_args
    **kw
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 998, in connection
    execution_options=execution_options)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.InternalError) (1366, "Incorrect integer value: 'aa' for column 'user_id' at row 1") [SQL: 'INSERT INTO user (user_id, user_name, user_avatar) VALUES (%(user_id)s, %(user_name)s, %(user_avatar)s)'] [parameters: {'user_name': 'ghhggfh', 'user_id': 'aa', 'user_avatar': 'http://ddddd.jpg'}]
2017-07-11 21:46:09,023 - web.py[line:2063] - ERROR: 500 POST /login (14.17.22.33) 39.09ms
2017-07-11 21:46:24,970 - web.py[line:1590] - ERROR: Uncaught exception POST /login (14.17.22.33)
HTTPServerRequest(protocol='http', host='123.206.212.82:8000', method='POST', uri='/login', version='HTTP/1.1', remote_ip='14.17.22.33', headers={'Connection': 'keep-alive', 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundary1JVqAWhRo8fAD94T', 'Cache-Control': 'no-cache, max-age=259200', 'Cookie': '_token="2|1:0|10:1499580914|6:_token|44:YzQ3Y2NkYTg5YjJkZDc4ZjI0ZDVhZGE4OTljNTI4MGM=|979e632019fa3ae0f734e45182ac1ffd7c292b7a315d0693b4799a394a1f092f"', 'Content-Length': '368', 'Postman-Token': '1f804616-6d46-2389-7d8b-f4664dc889b9', 'Accept-Encoding': 'gzip, deflate', 'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6', 'Accept': '*/*', 'Host': '123.206.212.82:8000', 'Origin': 'chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'})
Traceback (most recent call last):
  File "/home/ubuntu/py3/lib/python3.5/site-packages/tornado/web.py", line 1509, in _execute
    result = method(*self.path_args, **self.path_kwargs)
  File "/home/ubuntu/github/mini/handler/login_handler.py", line 28, in post
    user=self.db.query(User).filter(User.user_id==user_id).first()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2755, in first
    ret = list(self[0:1])
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2547, in __getitem__
    return list(res)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2885, in _get_bind_args
    **kw
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 998, in connection
    execution_options=execution_options)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "/home/ubuntu/py3/lib/python3.5/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.InternalError) (1366, "Incorrect integer value: 'aa' for column 'user_id' at row 1") [SQL: 'INSERT INTO user (user_id, user_name, user_avatar) VALUES (%(user_id)s, %(user_name)s, %(user_avatar)s)'] [parameters: {'user_name': 'ghhggfh', 'user_id': 'aa', 'user_avatar': 'http://ddddd.jpg'}]
2017-07-11 21:46:24,971 - web.py[line:2063] - ERROR: 500 POST /login (14.17.22.33) 1.94ms
